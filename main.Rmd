---
title: "The Affordable Housing Crunch"
author: "Ethan Jantz & Alex Kwan"
date: "4/17/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(here)
library(tidyverse)

# Ingests and cleans the HUD data
# Creates the object hud_data_raw in env
# Source: https://www.huduser.gov/portal/datasets/fmr.html
# NOTE: some years have more ZIP codes than others in this data
# TODO: Find out which ZIPs are included in all data
source(here("ingest_hud_data.R"))

# Zillow Observed Rent Index (ZORI) data
# Source: https://www.zillow.com/research/data/
# TODO: Convert to long format, similar to how hud_data_raw is formatted
# Not every ZIP code in Chicago is included in this data, we'll probably have to 
# identify some set of ZIP codes in both datasets and use those
# as a case study
zori_raw <- read_csv(here("Data", "ZORI_AllHomesPlusMultifamily_SSA_ZIP.csv")) %>%
  filter(RegionName %in% hud_data_raw$ZIP) # 92 ZIP Codes
```

Zillow's ZORI data provides average rents across all units, **regardless of the number of bedrooms**. We need some method to compare ZORI values with the values provided by HUD. This could take the form of finding the best fitting bedroom size or collapsing the HUD bedroom values into one average value. We can try both and see what works best.

```{r}
# TODO: Create method to compare ZORI values against FMR values
# Ideally this chunk will collapse hud_data_raw and zori_raw into 
# one object called data
```

Once we have both our data fully cleaned we'll want to do some basic visualizations of the data. I see this taking the form of a distribution plot across ZIP codes by year, a series of maps by year, and trend lines of ZORI values and FMR values.

```{r}
# TODO: Generate plots visualizing the data 
```

Finally, we'll want to take the above analysis and tie it back to the policy implications. We know HUD FMR data is used to guide housing subsidies. What does that mean in terms of the rental housing market, tenant precarity, and larger trends of income and housing inequality? If we have time I think it would be good to bring in some census data at the ZCTA level and looking to see if there is any association between demographics and housing affordability using this data.

```{r}
# TODO: Time permitting, link existing data with census data on socioeconomic characteristics
```



